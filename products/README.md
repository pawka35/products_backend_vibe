# Products Application

–ú–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏ –∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ FastAPI.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
products/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ models/           # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ product_models.py
‚îÇ   ‚îî‚îÄ‚îÄ search_models.py
‚îú‚îÄ‚îÄ schemas/          # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ product_schemas.py
‚îÇ   ‚îî‚îÄ‚îÄ search_schemas.py
‚îú‚îÄ‚îÄ crud/            # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ product_crud.py
‚îÇ   ‚îî‚îÄ‚îÄ search_crud.py
‚îú‚îÄ‚îÄ routers/         # FastAPI —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ orders.py    # –†–æ—É—Ç–µ—Ä –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ executor.py  # –†–æ—É—Ç–µ—Ä –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ search.py    # –†–æ—É—Ç–µ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ search_service.py
‚îú‚îÄ‚îÄ tests/           # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_orders.py
‚îÇ   ‚îî‚îÄ‚îÄ test_search.py
‚îî‚îÄ‚îÄ README.md
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üîµ Customer (–ó–∞–∫–∞–∑—á–∏–∫)
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤
- –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–¥–∫–∏ –ø–æ –∑–∞–∫–∞–∑–∞–º

### üü° Executor (–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –ù–∞—á–∞–ª–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
- –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫–∞–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º

### üîç Search (–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤)
- –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å–∞–π—Ç–∞—Ö (Maxi Retail)
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Order (–ó–∞–∫–∞–∑)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `customer_id` - ID –∑–∞–∫–∞–∑—á–∏–∫–∞
- `status` - —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ (pending, in_progress, completed, cancelled)
- `created_at` - –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `completed_at` - –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### Product (–ü—Ä–æ–¥—É–∫—Ç)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- `quantity` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `notes` - –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- `is_purchased` - –∫—É–ø–ª–µ–Ω –ª–∏ –ø—Ä–æ–¥—É–∫—Ç
- `purchased_at` - –≤—Ä–µ–º—è –ø–æ–∫—É–ø–∫–∏
- `purchased_by` - ID –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- `order_id` - ID –∑–∞–∫–∞–∑–∞

### ExternalProduct (–í–Ω–µ—à–Ω–∏–π —Ç–æ–≤–∞—Ä)
- `id` - ID —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –≤–Ω–µ—à–Ω–µ–º —Å–∞–π—Ç–µ
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `price` - —Ü–µ–Ω–∞
- `image` - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `url` - URL —Ç–æ–≤–∞—Ä–∞
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ
- `search_query` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- `source` - –∏—Å—Ç–æ—á–Ω–∏–∫ (—Å–∞–π—Ç)

## API Endpoints

### –ó–∞–∫–∞–∑—ã (Customer)
- `POST /orders/` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- `GET /orders/` - —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /orders/{order_id}` - –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
- `GET /orders/{order_id}/summary` - —Å–≤–æ–¥–∫–∞ –ø–æ –∑–∞–∫–∞–∑—É
- `PUT /orders/{order_id}/cancel` - –æ—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞

### –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ (Executor)
- `GET /executor/orders` - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã
- `GET /executor/orders/{order_id}` - –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
- `GET /executor/orders/{order_id}/summary` - —Å–≤–æ–¥–∫–∞ –ø–æ –∑–∞–∫–∞–∑—É
- `PUT /executor/orders/{order_id}/start` - –Ω–∞—á–∞–ª–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
- `PUT /executor/products/{product_id}/purchase` - –æ—Ç–º–µ—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏
- `PUT /executor/orders/{order_id}/complete` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- `GET /executor/orders/status/{status}` - –∑–∞–∫–∞–∑—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É

### –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `POST /search/products` - –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

## –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- `query` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- `page` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)

### –û—Ç–≤–µ—Ç
```json
{
  "query": "–º–æ–ª–æ–∫–æ",
  "total_found": 45,
  "total_pages": 3,
  "current_page": 1,
  "products": [...],
  "search_timestamp": "2024-01-01T12:00:00",
  "source": "maxi-retail.ru"
}
```

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `total_found / per_page` (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö)
- –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 1
- –ü—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –Ω–æ–º–µ—Ä–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –±–ª–∏–∂–∞–π—à–µ–µ –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
# –ò–º–ø–æ—Ä—Ç —Ä–æ—É—Ç–µ—Ä–æ–≤
from products.routers import orders_router, executor_router, search_router

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
app.include_router(orders_router)
app.include_router(executor_router)
app.include_router(search_router)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∑–∞–∫–∞–∑–æ–≤
python products/tests/test_orders.py

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
python -m pytest products/tests/test_search.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ –æ–±—â–∏–π —Å–∫—Ä–∏–ø—Ç
python run_tests.py orders
python run_tests.py search
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- FastAPI
- SQLAlchemy
- Pydantic
- aiohttp (–¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- BeautifulSoup4 (–¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML)
- Python 3.8+
